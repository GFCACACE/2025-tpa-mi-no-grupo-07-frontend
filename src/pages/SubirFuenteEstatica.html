<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Mapa - Subir Fuente Estática</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../styles/SubirFuenteEstatica.css">
</head>

<body>
    <header>
        <div class="header-left">
            <h1>Meta Mapa</h1>
            <h2>Sistema de gestión de mapeos colaborativos</h2>
        </div>
        <div class="header-right">
            <div class="user-profile-header" onclick="location.href='PerfilAdmin.html'" style="cursor:pointer;">
                <img src="../assets/images/Attack-on-Titan-in-real-life-4.png" alt="Foto de perfil" class="profile-pic-small">
                <span>Administrador</span>
            </div>
            <button class="logout-btn"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</button>
        </div>
    </header>
    
    <div class="upload-container">
        <div class="upload-content">
            <div class="upload-header">
                <h2 class="upload-title">Subir Fuente Estática</h2>
                <p class="upload-subtitle">Carga datasets en formato CSV para integrarlos al sistema</p>
            </div>
            
            <div class="separator"></div>
            
            <form class="upload-form" id="uploadForm">
                <div class="form-group">
                    <label for="nombreFuente">Nombre de la Fuente *</label>
                    <input type="text" id="nombreFuente" name="nombreFuente" placeholder="Ej: Datos demográficos 2023" required>
                    <p class="help-text">Asigna un nombre descriptivo para identificar esta fuente de datos</p>
                </div>
                
                <div class="form-group">
                    <label for="archivoDataset">Seleccionar Archivo *</label>
                    <div class="file-upload-area" id="dropZone">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <p class="upload-text">Arrastra tu archivo aquí o haz clic para seleccionar</p>
                        <p class="upload-subtext">Formatos aceptados: .csv, .xlsx, .json (Máx. 10MB)</p>
                        <input type="file" id="archivoDataset" name="archivoDataset" accept=".csv,.xlsx,.json" required hidden>
                        <button type="button" class="select-file-btn" onclick="document.getElementById('archivoDataset').click()">
                            <i class="fas fa-folder-open"></i> Seleccionar Archivo
                        </button>
                    </div>
                    <div class="file-info" id="fileInfo" style="display: none;">
                        <i class="fas fa-file-alt"></i>
                        <span id="fileName">No se ha seleccionado ningún archivo</span>
                        <button type="button" class="remove-file-btn" onclick="removeFile()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="cancel-btn">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="submit" class="upload-btn" disabled>
                        <i class="fas fa-cloud-upload-alt"></i> Subir Fuente
                    </button>
                </div>
            </form>
            
            <div class="upload-info">
                <h3>Información importante</h3>
                <div class="info-cards">
                    
                    <div class="info-card">
                        <i class="fas fa-database"></i>
                        <h4>Estructura de datos</h4>
                        <p>El archivo debe estar en formato CSV con codificación UTF-8. Asegúrate de que los datos estén limpios y bien estructurados para una integración exitosa.</p>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Seguridad</h4>
                        <p>Todos los archivos son escaneados por virus antes de ser procesados por el sistema.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p class="footer-title">¿Tenés dudas? Contactate con nosotros.</p>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <span>contacto@metamapa.org</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <span>+54 11 1234 5678</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('uploadForm');
            const fileInput = document.getElementById('archivoDataset');
            const dropZone = document.getElementById('dropZone');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const uploadBtn = document.querySelector('.upload-btn');
            const nombreFuente = document.getElementById('nombreFuente');
            
            // Validar formulario
            function validateForm() {
                const isFileSelected = fileInput.files.length > 0;
                const isNameFilled = nombreFuente.value.trim() !== '';
                uploadBtn.disabled = !(isFileSelected && isNameFilled);
            }
            
            // Eventos para el input de nombre
            nombreFuente.addEventListener('input', validateForm);
            
            // Eventos para el input de archivo
            fileInput.addEventListener('change', function(e) {
                if (this.files.length > 0) {
                    const file = this.files[0];
                    fileName.textContent = file.name;
                    fileInfo.style.display = 'flex';
                    dropZone.style.borderColor = '#27ae60';
                    dropZone.style.backgroundColor = '#f0fff4';
                }
                validateForm();
            });
            
            // Drag and drop functionality
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropZone.style.borderColor = '#35327D';
                dropZone.style.backgroundColor = '#f0f4ff';
            }
            
            function unhighlight() {
                dropZone.style.borderColor = '#e0e0e0';
                dropZone.style.backgroundColor = '#f8f9fa';
            }
            
            dropZone.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                fileInput.files = files;
                
                if (files.length > 0) {
                    const file = files[0];
                    fileName.textContent = file.name;
                    fileInfo.style.display = 'flex';
                    dropZone.style.borderColor = '#27ae60';
                    dropZone.style.backgroundColor = '#f0fff4';
                }
                validateForm();
            }
            
            // Click en el área de drop también abre el selector de archivos
            dropZone.addEventListener('click', function() {
                fileInput.click();
            });
            
            // Submit del formulario
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Simular subida exitosa
                const formData = new FormData();
                formData.append('nombreFuente', nombreFuente.value);
                formData.append('archivoDataset', fileInput.files[0]);
                
                // Aquí iría la lógica real de subida
                alert('Fuente estática subida exitosamente: ' + nombreFuente.value);
                
                // Resetear formulario
                form.reset();
                fileInfo.style.display = 'none';
                dropZone.style.borderColor = '#e0e0e0';
                dropZone.style.backgroundColor = '#f8f9fa';
                uploadBtn.disabled = true;
            });
            
            // Función para remover archivo seleccionado
            window.removeFile = function() {
                fileInput.value = '';
                fileInfo.style.display = 'none';
                dropZone.style.borderColor = '#e0e0e0';
                dropZone.style.backgroundColor = '#f8f9fa';
                validateForm();
            };
        });
    </script>
</body>
</html>